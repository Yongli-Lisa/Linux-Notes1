
调度概念：   
<img src="https://github.com/Yongli-Lisa/Linux-Notes1/blob/869ff3d3d446c4b86be7a291a347c8392a73682c/Img/%E8%B0%83%E5%BA%A6%E4%B8%8A.JPG" width="600px">    
    

**调度策略与调度类**   

调度策略：   
```
#define SCHED_NORMAL    0
#define SCHED_FIFO    1
#define SCHED_RR    2
#define SCHED_BATCH    3
#define SCHED_IDLE    5
#define SCHED_DEADLINE    6
```
         
优先级：    
```
int prio, static_prio, normal_prio;
unsigned int rt_priority;
```


进程分类与调度：   
实时进程，也就是需要尽快执行返回结果的那种，优先级的范围是 0～99，调度策略 SCHED_FIFO、SCHED_RR、SCHED_DEADLINE   
普通进程，优先级就没实时进程这么高，优先级的范围是 100～139，调度策略 SCHED_NORMAL、SCHED_BATCH、SCHED_IDLE   

**完全公平调度算法(CFS: Completely Fair Scheduling)：**     
CPU 会提供一个时钟，过一段时间就触发一个时钟中断，叫Tick。CFS 会为每一个进程安排一个虚拟运行时间 vruntime。如果一个进程在运行，随着时间的增长，也就是一个个 tick 的到来，进程的 vruntime 将不断增大。没有得到执行的进程 vruntime 不变。   
虚拟运行时间 vruntime += 实际运行时间 delta_exec * NICE_0_LOAD/ 权重。    



调度策略实现逻辑，sched_class：
stop_sched_class 优先级最高的任务会使用这种策略，会中断所有其他线程，且不会被其他任务打断；
dl_sched_class 就对应上面的 deadline 调度策略；
rt_sched_class 就对应 RR 算法或者 FIFO 算法的调度策略，具体调度策略由进程的 task_struct->policy 指定；
fair_sched_class 就是普通进程的调度策略；
idle_sched_class 就是空闲进程的调度策略。


红黑树
