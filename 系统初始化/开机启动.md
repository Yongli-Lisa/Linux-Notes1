按启动按钮 -> 主板加电 -> ROM（只读存储器）固化了一些初始化程序BIOS   

当电脑刚加电的时候，会做一些重置的工作，将 CS 设置为 0xFFFF，将 IP 设置为 0x0000，所以第一条指令就会指向 0xFFFF0，正是在 ROM 的范围内。在这里，有一个 JMP 命令会跳到 ROM 中做初始化工作的代码，于是，BIOS 开始进行初始化的工作。   
    
<img src="https://github.com/Yongli-Lisa/Linux-Notes1/blob/981d646817e8f850106d6ceaeca12d8a4fab8567/Img/1M%E5%86%85%E5%AD%98.JPG" width="300px">
    
**BIOS时期**   
检查硬件状况   
建立一个中断向量表和中断服务程序   
显示结果   

       
**bootloader时期**   
启动盘一般在第一个扇区，512字节，以0xAA55结束   
    
Grub2   
(1)boot.img  512字节，安装到启动盘的第一个扇区MBR（Master Boot Record） 加载core.img   
(2)core.img, 包含 diskboot.img, lzma_decompress.img(调用real_to_prot切换到保护模式,解压缩kernel.img), kernel.img(是grub内核，不是Linux内核), modules&others   
    
grub_show_menu() 会显示出让你选择的那个操作系统的列表   
grub_menu_execute_entry() 解析并执行选择的项   
例如里面的 linux16 命令，表示装载指定的内核文件，并传递内核启动参数。于是 grub_cmd_linux() 函数会被调用   
如果配置文件里面还有 initrd 命令，用于为即将启动的内核传递 init ramdisk 路径。于是 grub_cmd_initrd() 函数会被调用，将 initramfs 加载到内存中来   
最后，grub_command_execute (“boot”, 0, 0) 才开始真正地启动内核    

**从实模式切换到保护模式**   
启用分段   
启动分页   
打开 Gate A20，也就是第 21 根地址线的控制线   
解压缩kernel.img






